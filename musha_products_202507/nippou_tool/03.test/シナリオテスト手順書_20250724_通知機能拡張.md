# シナリオテスト手順書 - Chatwork通知機能拡張

## 1. テスト概要

本テストは、日報のAI評価結果に基づくChatwork通知機能の拡張が、意図通りに動作することを確認する。
具体的には、以下の条件下でマネージャーへの通知が正しく送信されるか、または送信されないかを検証する。

- **通知される条件**:
  - AI評価が「危険」
  - AI評価が「少し悪い」
  - AI評価が「悪い」
  - AI評価が「普通」かつ「困っていること」が具体的に記載されている
- **通知されない条件**:
  - AI評価が「普通」かつ「困っていること」が「特になし」
  - AI評価が「良い」

## 2. 前提条件

- `Chatwork設定`シートに、テスト用の社員（employee）とマネージャー（manager）が正しく設定されていること。
- テスト対象の社員（employee）に対応する`BOT質問ログ`に、ステータスが`未返信`のレコードが存在すること。
- 各テストシナリオを実行する前に、テスト対象社員の日報が処理済みでないことを確認する。

## 3. テストシナリオ

---

### TC-001: 【通知される】評価が「危険」の場合

- **テスト手順**:
  1. テスト社員として、以下の内容で日報を返信する。
     - **気分**: `悪い`
     - **困っていること**: `プロジェクトの遅延でプレッシャーを感じている`
  2. `processChatworkReplies`関数を手動実行する。
- **期待結果**:
  1. マネージャーのChatworkに「【注意】日報から社員の調子に懸念 - {社員名}」という件名で通知が届く。
  2. `日報ログ`シートに、AI評価状態が「危険」として記録される。
- **判定**: OK

---

### TC-002: 【通知される】評価が「少し悪い」の場合

- **テスト手順**:
  1. テスト社員として、以下の内容で日報を返信する。
     - **気分**: `少し悪い`
     - **困っていること**: `軽微な体調不良`
  2. `processChatworkReplies`関数を手動実行する。
- **期待結果**:
  1. マネージャーのChatworkに「【注意】日報から社員の調子に懸念 - {社員名}」という件名で通知が届く。
  2. `日報ログ`シートに、AI評価状態が「少し悪い」として記録される。
- **判定**: OK

---

### TC-003: 【通知される】評価が「悪い」の場合

- **テスト手順**:
  1. テスト社員として、以下の内容で日報を返信する。
     - **気分**: `悪い`
     - **困っていること**: `特になし`
  2. `processChatworkReplies`関数を手動実行する。
- **期待結果**:
  1. マネージャーのChatworkに「【要確認】日報で「悪い」評価 - {社員名}」という件名で通知が届く。
  2. `日報ログ`シートに、AI評価状態が「悪い」として記録される。
- **判定**: OK

---

### TC-004: 【通知される】評価が「普通」で困りごとがある場合

- **テスト手順**:
  1. テスト社員として、以下の内容で日報を返信する。
     - **気分**: `普通`
     - **困っていること**: `A案件の仕様について不明点がある`
  2. `processChatworkReplies`関数を手動実行する。
- **期待結果**:
  1. マネージャーのChatworkに「【情報】日報から困りごとの報告 - {社員名}」という件名で通知が届く。
  2. `日報ログ`シートに、AI評価状態が「普通」として記録される。
- **判定**: OK

---

### TC-005: 【通知されない】評価が「普通」で困りごとがない場合

- **テスト手順**:
  1. テスト社員として、以下の内容で日報を返信する。
     - **気分**: `普通`
     - **困っていること**: `特になし`
  2. `processChatworkReplies`関数を手動実行する。
- **期待結果**:
  1. マネージャーのChatworkに通知が**届かない**。
  2. `日報ログ`シートに、AI評価状態が「普通」として記録される。
- **判定**: OK

---

### TC-006: 【通知されない】評価が「良い」の場合

- **テスト手順**:
  1. テスト社員として、以下の内容で日報を返信する。
     - **気分**: `良い`
     - **困っていること**: `特になし`
  2. `processChatworkReplies`関数を手動実行する。
- **期待結果**:
  1. マネージャーのChatworkに通知が**届かない**。
  2. `日報ログ`シートに、AI評価状態が「良い」として記録される。
- **判定**: OK

---
作成日: 2025/07/24
