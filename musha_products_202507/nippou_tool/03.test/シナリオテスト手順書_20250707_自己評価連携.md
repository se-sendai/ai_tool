
### **シナリオ4: 日報ログ事前集約の確認**

---

#### **テストケースID: 4-1**
-   **テスト内容:** 過去1年間の日報ログがGAS内で正しく集約され、Geminiへのプロンプトに組み込まれること。
-   **操作手順:**
    1.  `日報ログ`シートに、`TARGET_EMPLOYEE_NAME_FOR_1ON1`に設定した社員の過去1年間の日報データ（気分、困っていること、AI評価状態などが多様に含まれるもの）を複数件（例: 10件以上）入力する。
    2.  スプレッドシートのメニューから `日報AIツール` > `1on1ヒアリング項目生成` を実行する。
-   **確認項目:**
    -   GASの実行ログに、日報ログの要約処理が完了した旨のログが出力されること。
    -   GASの実行ログに出力されるGeminiへの最終プロンプト内に、日報ログのサマリーが以下の形式で含まれていること。
        -   気分傾向（各気分が何回報告されたか）
        -   AI評価「危険」または「少し悪い」の履歴（日付と理由）
        -   繰り返し現れる課題キーワードとその出現回数
        -   ポジティブな業務内容の抜粋
    -   Chatworkに通知される1on1ヒアリング項目（ダミーデータ）が、日報ログのサマリーと自己評価シートの両方を考慮した内容になっていること（これは手動での内容確認が必要）。

---

#### **テストケースID: 4-2**
-   **テスト内容:** 過去1年間の日報ログが存在しない場合に、適切に処理されること。
-   **操作手順:**
    1.  `日報ログ`シートから、`TARGET_EMPLOYEE_NAME_FOR_1ON1`に設定した社員の過去1年間の日報データを全て削除する。
    2.  スプレッドシートのメニューから `日報AIツール` > `1on1ヒアリング項目生成` を実行する。
-   **確認項目:**
    -   GASの実行ログに「過去1年間の日報ログはありません。」というメッセージが出力されること。
    -   GASの実行ログに出力されるGeminiへの最終プロンプト内に、日報ログのサマリーが「過去1年間の日報ログはありません。」という内容で含まれていること。
    -   Chatworkに通知される1on1ヒアリング項目（ダミーデータ）が、日報ログがないことを考慮した内容になっていること（これは手動での内容確認が必要）。

---
