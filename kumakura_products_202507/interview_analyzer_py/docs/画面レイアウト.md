# GUI画面レイアウト仕様

## 1. 概要

本ドキュメントは、Interview AnalyzerのGUIアプリケーションの画面レイアウトとコンポーネントの配置を定義します。

## 2. 使用ライブラリ

- `customtkinter`

## 3. ウィンドウ設定

- **タイトル**: Interview Analyzer
- **サイズ**: 800x600

## 4. 画面構成図

```
+------------------------------------------------------------------------------+
| Interview Analyzer                                             [ - ] [ □ ] [ X ] |
+------------------------------------------------------------------------------+
|                                                                              |
|  ┌────────────────────────────────────────────────────────────────────────┐  |
|  │ [o] 面談分析         [ ] AI対話         [ ] 日報分析                     │  |
|  └────────────────────────────────────────────────────────────────────────┘  |
|                                                                              |
|  ┌────────────────────────────────────────────────────────────────────────┐  |
|  │ [ 分析対象のファイルまたはフォルダのパス...        ] [ファイル選択] [フォルダ選択] │  |
|  └────────────────────────────────────────────────────────────────────────┘  |
|                                                                              |
|  ┌────────────────────────────────────────────────────────────────────────┐  |
|  │                              [ 分析実行 ]                              │  |
|  └────────────────────────────────────────────────────────────────────────┘  |
|                                                                              |
|  ┌────────────────────────────────────────────────────────────────────────┐  |
|  │                                                                        │  |
|  │                                                                        │  |
|  │                                                                        │  |
|  │  (ログ表示エリア)                                                      │  |
|  │                                                                        │  |
|  │                                                                        │  |
|  │                                                                        │  |
|  └────────────────────────────────────────────────────────────────────────┘  |
|                                                                              |
|  ┌────────────────────────────────────────────────────────────────────────┐  |
|  │ [ 削除対象を選択してください... ] [ 削除実行 ]                         │  |
|  └────────────────────────────────────────────────────────────────────────┘  |
|  ┌────────────────────────────────────────────────────────────────────────┐  |
|  │ [ AIへの質問を入力してください... ] [ 送信 ]                           │  |
|  │ [ 対話終了 ]                                                           │  |
|  └────────────────────────────────────────────────────────────────────────┘  |
|                                                                              |
+------------------------------------------------------------------------------+
```

## 5. コンポーネント詳細

1.  **モード選択ラジオボタン (`mode_frame`)**
    - **配置**: 画面上部
    - **コンポーネント**: `CTkRadioButton` x 3
    - **ラベル**: 「面談分析」「AI対話」「日報分析」
    - **動作**: 選択されたモードを内部的に保持する。
        - **「面談分析」「日報分析」モード**: パス入力テキストボックスと選択ボタンが表示され、「分析実行」ボタンが有効になる。
        - **「AI対話」モード**: パス入力テキストボックスと選択ボタンは非表示になり、AI対話用の入力フィールドとボタンが表示される。「分析実行」ボタンは「AI対話開始」に変化し、AI対話セッションの準備を開始する。

2.  **パス入力テキストボックス (`path_entry`)**
    - **配置**: 中央
    - **コンポーネント**: `CTkEntry`
    - **状態**: 読み取り専用（ユーザーは直接入力しない）
    - **動作**: 「ファイル選択」または「フォルダ選択」ボタンによって選択されたパスを表示する。**「AI対話」モード選択時は非表示となる。**

3.  **選択ボタン (`select_button_frame`)**
    - **配置**: パス入力テキストボックスの右側
    - **コンポーネント**: `CTkButton` x 2
    - **ラベル**: 「ファイル選択」「フォルダ選択」
    - **動作**:
        - **ファイル選択**: ファイル選択ダイアログを開く。
        - **フォルダ選択**: フォルダ選択ダイアログを開く。
        - **「AI対話」モード選択時は非表示となる。**

4.  **分析実行ボタン (`run_button`)**
    - **配置**: 画面中央
    - **コンポーネント**: `CTkButton`
    - **ラベル**: 「分析実行」
    - **動作**:
        - **「面談分析」「日報分析」モード**: `backend_logic.py` の処理を呼び出し、結果をログエリアに表示する。処理中は無効化される。
        - **「AI対話」モード**: ラベルが「AI対話開始」に変化し、AI対話セッションの準備（既存データの読み込み）を開始する。準備中は無効化される。

5.  **ログ表示エリア (`log_textbox`)**
    - **配置**: 画面中央下部
    - **コンポーネント**: `CTkTextbox`
    - **状態**: スクロール可能、読み取り専用
    - **動作**: バックエンド処理の進捗、結果、エラーメッセージなどを時系列で表示する。**「AI対話」モードでは、会話履歴がクリアされずに追記されていく。**

7.  **データ削除用UI (`delete_frame`)**
    - **配置**: ログ表示エリアとAI対話モード用UIの間
    - **コンポーネント**: `CTkComboBox` (delete_combobox), `CTkButton` (delete_button)
    - **状態**: **「AI対話」モード選択時にのみ表示される。**
    - **動作**:
        - **削除対象ドロップダウン (`delete_combobox`)**: データベースから取得した削除可能なデータの一覧を表示する。初期状態は空。
        - **削除実行ボタン (`delete_button`)**: ドロップダウンで選択されたデータをデータベースから削除する。確認ダイアログを表示後、削除を実行する。

8.  **AI対話モード用UI (`qa_chat_frame`)**
    - **配置**: ログ表示エリアの下部
    - **コンポーネント**: `CTkEntry` (qa_input_entry), `CTkButton` (qa_send_button), `CTkButton` (qa_end_button)
    - **状態**: **「AI対話」モード選択時にのみ表示される。**
    - **動作**:
        - **質問入力フィールド (`qa_input_entry`)**: AIへの質問を入力する。
        - **送信ボタン (`qa_send_button`)**: 入力された質問をAIに送信し、AIの応答をログ表示エリアに表示する。
        - **対話終了ボタン (`qa_end_button`)**: AI対話セッションを終了し、UIを通常のモード（面談分析/日報分析）に戻す。