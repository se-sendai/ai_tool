2025-07-30 09:41:57,014 - INFO - Gemini APIが正常に設定されました。使用モデル: gemini-2.0-flash
2025-07-30 09:41:57,014 - INFO - 日報集計期間が'monthly'に設定されました。
2025-07-30 09:41:57,015 - INFO -     AIにデータ構造分析をリクエスト中...
2025-07-30 09:41:57,015 - INFO -     AIへの入力データ（先頭部分）: CSVのヘッダー部分... (省略)
2025-07-30 09:41:57,015 - INFO -         DEBUG: AI prompt length: 1358 characters.
2025-07-30 09:41:57,015 - INFO -     AIからのデータ構造分析応答を受信しました。
2025-07-30 09:41:57,015 - INFO - AIからの生応答: {"structure": "横持ち", "employee_col": "従業員名"}
2025-07-30 09:41:57,015 - INFO -     AI応答をJSONとしてパース中...
2025-07-30 09:41:57,015 - INFO -     AI応答のパースが完了しました。
2025-07-30 09:41:57,016 - INFO - AIへの質問: 今日の天気は？
2025-07-30 09:41:57,016 - INFO - AIからの応答: AIからの回答です。
2025-07-30 09:41:57,016 - INFO - AIへの質問: 今日の天気は？
2025-07-30 09:41:57,017 - INFO - AIからの応答: Ollamaからの回答です。
2025-07-30 09:41:57,017 - INFO -         DEBUG: Attempting to initialize Gemini model (gemini-pro).
2025-07-30 09:41:57,017 - INFO -         DEBUG: Gemini model initialized successfully.
2025-07-30 09:41:57,017 - INFO -         DEBUG: Calling generate_content with timeout=60...
2025-07-30 09:41:57,017 - INFO -         DEBUG: generate_content call finished.
2025-07-30 09:41:57,017 - INFO -         Gemini API応答受信
2025-07-30 09:41:57,017 - INFO -         DEBUG: Gemini API response text (first 100 chars): Geminiからの応答です。...
2025-07-30 09:41:57,018 - INFO -     AIに面談データ全体の要約をリクエスト中...
2025-07-30 09:41:57,018 - INFO -     AIへの入力テキスト（先頭部分）: 面談内容のテキストデータ... (省略)
2025-07-30 09:41:57,018 - INFO -     AIからの面談コメント要約応答を受信しました。
2025-07-30 09:41:57,018 - INFO -     DEBUG: Summary from AI (type: <class 'str'>): AIによる要約です。...
2025-07-30 09:41:57,018 - INFO - 削除リクエストを受信しました: [まとめ] 山田太郎 ID:yamada_001 (全データ削除)
2025-07-30 09:41:57,020 - INFO - 削除リクエストを受信しました: 山田太郎 ID:yamada_001 (20230115) (面談)
2025-07-30 09:41:57,020 - INFO - Gemini APIが正常に設定されました。使用モデル: gemini-pro
2025-07-30 09:41:57,021 - INFO - 日報集計期間が'weekly'に設定されました。
2025-07-30 09:41:57,027 - INFO - 日報データファイル './tests/dummy_daily_report.xlsx' の処理を開始します。
2025-07-30 09:41:57,027 - INFO - 出力ディレクトリ '日報分析結果' を作成しました。
2025-07-30 09:41:57,027 - INFO - 従業員 '山田太郎' の日報データを処理中...
2025-07-30 09:41:57,064 - INFO -   期間: 202307 の日報を処理中...
2025-07-30 09:41:57,067 - INFO -   '日報分析結果\山田太郎_202307_日報分析.csv' を保存しました。
2025-07-30 09:41:57,067 - INFO - 従業員 '佐藤花子' の日報データを処理中...
2025-07-30 09:41:57,072 - INFO -   期間: 202307 の日報を処理中...
2025-07-30 09:41:57,074 - INFO -   '日報分析結果\佐藤花子_202307_日報分析.csv' を保存しました。
2025-07-30 09:41:57,074 - INFO - 日報データの処理が完了しました。
2025-07-30 09:41:57,075 - INFO - モード: 面談分析を開始します。
2025-07-30 09:41:57,076 - INFO - ディレクトリ './tests/dummy_folder' 内のファイルを処理します。
2025-07-30 09:41:57,076 - INFO - 合計 2 個のファイルが見つかりました。
2025-07-30 09:41:57,076 - INFO - [1/2] ファイル './tests/dummy_folder\dummy_interview_2.csv' を処理中...
2025-07-30 09:41:57,076 - INFO -   ファイル './tests/dummy_folder\dummy_interview_2.csv' のデータ構造をAIで分析中...
2025-07-30 09:41:57,076 - INFO -   DEBUG: converting df_single.head() to csv string...
2025-07-30 09:41:57,076 - INFO -   DEBUG: df_single.head() converted to csv string successfully.
2025-07-30 09:41:57,076 - INFO -   DEBUG: Calling analyze_dataframe_structure_with_ai...
2025-07-30 09:41:57,076 - INFO -   DEBUG: analyze_dataframe_structure_with_ai returned.
2025-07-30 09:41:57,076 - INFO -         DEBUG: Extracted employee_name (from file): 佐藤花子
2025-07-30 09:41:57,077 - INFO -   横持ちデータからコメント列 '面談内容' を抽出しました。
2025-07-30 09:41:57,077 - INFO -   ファイル './tests/dummy_folder\dummy_interview_2.csv' の面談データをAIで要約中...
2025-07-30 09:41:57,077 - INFO -   DEBUG: Summary received from get_summary_from_ai (type: <class 'str'>): 要約テスト2...
2025-07-30 09:41:57,077 - INFO -   ファイル './tests/dummy_folder\dummy_interview_2.csv' のAIによるアドバイスを生成中...
2025-07-30 09:41:57,078 - INFO -   ファイル './tests/dummy_folder\dummy_interview_2.csv' の処理が完了しました。
2025-07-30 09:41:57,078 - INFO - [2/2] ファイル './tests/dummy_folder\dummy_interview_3.csv' を処理中...
2025-07-30 09:41:57,078 - INFO -   ファイル './tests/dummy_folder\dummy_interview_3.csv' のデータ構造をAIで分析中...
2025-07-30 09:41:57,078 - INFO -   DEBUG: converting df_single.head() to csv string...
2025-07-30 09:41:57,078 - INFO -   DEBUG: df_single.head() converted to csv string successfully.
2025-07-30 09:41:57,078 - INFO -   DEBUG: Calling analyze_dataframe_structure_with_ai...
2025-07-30 09:41:57,078 - INFO -   DEBUG: analyze_dataframe_structure_with_ai returned.
2025-07-30 09:41:57,078 - INFO -         DEBUG: Extracted employee_name (from file): 田中次郎
2025-07-30 09:41:57,079 - INFO -   横持ちデータからコメント列 '面談内容' を抽出しました。
2025-07-30 09:41:57,079 - INFO -   ファイル './tests/dummy_folder\dummy_interview_3.csv' の面談データをAIで要約中...
2025-07-30 09:41:57,079 - INFO -   DEBUG: Summary received from get_summary_from_ai (type: <class 'str'>): 要約テスト3...
2025-07-30 09:41:57,079 - INFO -   ファイル './tests/dummy_folder\dummy_interview_3.csv' のAIによるアドバイスを生成中...
2025-07-30 09:41:57,079 - INFO -   ファイル './tests/dummy_folder\dummy_interview_3.csv' の処理が完了しました。
2025-07-30 09:41:57,079 - INFO - 面談分析の処理が完了しました。
2025-07-30 09:41:57,079 - INFO - モード: 面談分析を開始します。
2025-07-30 09:41:57,080 - INFO - 単一ファイル './tests/dummy_interview.csv' を処理します。
2025-07-30 09:41:57,080 - INFO - [1/1] ファイル './tests/dummy_interview.csv' を処理中...
2025-07-30 09:41:57,080 - INFO -   ファイル './tests/dummy_interview.csv' のデータ構造をAIで分析中...
2025-07-30 09:41:57,080 - INFO -   DEBUG: converting df_single.head() to csv string...
2025-07-30 09:41:57,080 - INFO -   DEBUG: df_single.head() converted to csv string successfully.
2025-07-30 09:41:57,080 - INFO -   DEBUG: Calling analyze_dataframe_structure_with_ai...
2025-07-30 09:41:57,080 - INFO -   DEBUG: analyze_dataframe_structure_with_ai returned.
2025-07-30 09:41:57,080 - INFO -         DEBUG: Extracted employee_name (from file): 山田太郎
2025-07-30 09:41:57,080 - INFO -   横持ちデータからコメント列 '面談内容' を抽出しました。
2025-07-30 09:41:57,080 - INFO -   ファイル './tests/dummy_interview.csv' の面談データをAIで要約中...
2025-07-30 09:41:57,081 - INFO -   DEBUG: Summary received from get_summary_from_ai (type: <class 'str'>): 要約テスト...
2025-07-30 09:41:57,081 - INFO -   ファイル './tests/dummy_interview.csv' のAIによるアドバイスを生成中...
2025-07-30 09:41:57,081 - INFO -   ファイル './tests/dummy_interview.csv' の処理が完了しました。
2025-07-30 09:41:57,081 - INFO - 面談分析の処理が完了しました。
